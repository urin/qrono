"use strict";var rt=Object.defineProperty;var Q=Object.getOwnPropertySymbols;var st=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var G=(t,e,n)=>e in t?rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||(e={}))st.call(e,n)&&G(t,n,e[n]);if(Q)for(var n of Q(e))at.call(e,n)&&G(t,n,e[n]);return t};Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const ut=new Date(1915,0,1,12,0,0,0),b=7,K=24,v=60,k=v*K,V=60,ct=V*v,ft=ct*K,_=1e3,ht=V*_,J=ft*_;function p(t,...e){return e.flat().some(t.hasOwnProperty,t)}function X(t){return Object.entries(t).filter(([,e])=>!lt(e)).map(([e])=>e)}function Y(t){return t!==void 0}function lt(t){return t instanceof Function}function yt(t){return typeof t=="string"||t instanceof String}function T(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function tt(t){return!Number.isNaN(t.getTime())}function S(t){return p(t,["year","month","day","hour","minute","second","millisecond"])}const F=o;o.date=a;const M={localtime:!1,disambiguation:"compatible"};o.context=function(t){if(Y(t)){for(const e of X(M))p(t,e)&&(M[e]=t[e]);return this}return N({},M)};const dt=1,mt=2,et=3,w=4,pt=5,Dt=6,gt=7;Object.assign(o,{monday:dt,tuesday:mt,wednesday:et,thursday:w,friday:pt,saturday:Dt,sunday:gt});const f=Symbol();function o(...t){var s;if(!new.target)return new o(...t);const e={nativeDate:null,localtime:!1,disambiguation:"compatible",set:Mt,parse:Tt,valid:Ot,context:wt,getNative:bt};if(this[f]=e,e.context(M),t[0]instanceof o){const i=t.shift();e.nativeDate=i.nativeDate(),e.context(i.context())}T(t[0])&&!S(t[0])&&e.context(t.shift());const n=t[0],u=t[1];if(n==null)(s=e.nativeDate)!=null||(e.nativeDate=new Date);else if(n instanceof Date)e.nativeDate=new Date(n.getTime());else if(yt(n))e.parse(n);else if(T(n)){if(!S(n))throw RangeError("Missing time field (year, minute, day, hour, minute, second or millisecond)");e.set(n)}else if(Number.isFinite(n)&&!Number.isFinite(u))e.nativeDate=new Date(n);else if(Number.isFinite(n)||Array.isArray(n)){const i=t.flat(),r=i.filter(l=>Number.isSafeInteger(l));if(r.length!==i.length)throw RangeError("Should be safe integers");if(r.length>7)throw RangeError("Too many numbers");e.set({year:r[0],month:r[1],day:r[2],hour:r[3],minute:r[4],second:r[5],millisecond:r[6]})}else throw TypeError(`Invalid argument ${t}`);return this}function Ot(){return tt(this.nativeDate)}function wt(t){if(t){for(const e of X(M))p(t,e)&&(this[e]=t[e]);return this}}function bt(t){return this.nativeDate[`get${this.localtime?"":"UTC"}${t}`]()}function Mt(t){var C,A,H,I,U,E,P,R,W,j,x,B,L,q,z,Z;const e=N({},t);if(e.month=e.month&&e.month-1,!this.localtime){const g=(C=this.nativeDate)!=null?C:new Date(0),$=new Date(0);return $.setUTCFullYear((A=e.year)!=null?A:g.getUTCFullYear(),(H=e.month)!=null?H:g.getUTCMonth(),(I=e.day)!=null?I:g.getUTCDate()),$.setUTCHours((U=e.hour)!=null?U:g.getUTCHours(),(E=e.minute)!=null?E:g.getUTCMinutes(),(P=e.second)!=null?P:g.getUTCSeconds(),(R=e.millisecond)!=null?R:g.getUTCMilliseconds()),this.nativeDate=$,this}const n=!p(t,"hour","minute","second","millisecond"),u=n?"later":this.disambiguation,s=(W=this.nativeDate)!=null?W:new Date(0,0),i=new Date(ut.getTime()),r={year:(j=e.year)!=null?j:s.getFullYear(),month:(x=e.month)!=null?x:s.getMonth(),day:(B=e.day)!=null?B:s.getDate(),hour:(L=e.hour)!=null?L:n?0:s.getHours(),minute:(q=e.minute)!=null?q:n?0:s.getMinutes(),second:(z=e.second)!=null?z:n?0:s.getSeconds(),millisecond:(Z=e.millisecond)!=null?Z:n?0:s.getMilliseconds()};i.setFullYear(r.year,r.month,r.day),i.setHours(r.hour,r.minute,r.second,r.millisecond);const l=i.getTime(),d=new Date(l);d.setDate(i.getDate()+1);const h=new Date(l);h.setDate(i.getDate()-1);const c=d.getTimezoneOffset()-h.getTimezoneOffset();if(u==="compatible"||c===0)return this.nativeDate=i,this;const D=r.year*1e8+r.month*1e6+r.day*1e4+r.hour*100+r.minute<i.getFullYear()*1e8+i.getMonth()*1e6+i.getDate()*1e4+i.getHours()*100+i.getMinutes(),O=new Date(new Date(l).setUTCMinutes(i.getUTCMinutes()+c)),it=O.getHours()===i.getHours()&&O.getMinutes()===i.getMinutes();if(!D&&!it)return this.nativeDate=i,this;if(u==="reject")throw new RangeError(`Requested local time ${r} is ambiguous.`);return this.nativeDate=u==="later"?i:O,this}const vt=new RegExp("^(\\d{4})(?:[-/]?([0-2]?\\d)(?:[-/]?([0-3]?\\d))?)?(?:[T\\s]([0-2]?\\d)(?::([0-5]?\\d)?(?::([0-6]?\\d)?(?:[.:](\\d{1,3})?\\d*)?)?)?)?(Z|[-+]\\d{2}:?\\d{2})?$");function Tt(t){var h;const e=t.trim().toUpperCase(),n=e.match(vt);if(!n)throw RangeError(`Failed to parse '${t}'. Should be yyyy[[-|/]MM[[-|/]DD]][(T| )HH:mm[:ss[(.|:)SSS]]][Z|(+|-)hh:mm]`);const u=n[4]!==void 0,[s,i,r,l]=[+n[1],+n[2]||1,+n[3]||1,n[8]],d=new Date(e);if(!tt(d))throw RangeError(`Failed to parse '${t}' by Date. Should be yyyy[[-|/]MM[[-|/]DD]][(T| )HH:mm[:ss[(.|:)SSS]]][Z|(+|-)hh:mm]`);return l?this.nativeDate=d:u?this.set({year:s,month:i,day:r,hour:+n[4]||0,minute:+n[5]||0,second:+n[6]||0,millisecond:+((h=n[7])==null?void 0:h.padStart(3,"0"))||0}):this.set({year:s,month:i,day:r}),this}const m=(t,e)=>String(t).padStart(e,"0");o.prototype.toString=function(){if(this[f].localtime){const t=this[f].nativeDate,e=-t.getTimezoneOffset(),n=Math.abs(e);return`${m(t.getFullYear(),4)}-${m(t.getMonth()+1,2)}-${m(t.getDate(),2)}T${m(t.getHours(),2)}:${m(t.getMinutes(),2)}:${m(t.getSeconds(),2)}.${m(t.getMilliseconds(),3)}${e>=0?"+":"-"}${m(Math.trunc(n/v),2)}:${m(n%v,2)}`}return this[f].nativeDate.toISOString()};o.prototype.valueOf=function(){return this[f].nativeDate.valueOf()};o.prototype.clone=function(...t){return new o(this,...t)};o.prototype.context=function(t){return Y(t)?this.clone(t):{localtime:this[f].localtime,disambiguation:this[f].disambiguation}};o.prototype.nativeDate=function(){return new Date(this[f].nativeDate.getTime())};o.prototype.offset=function(){return this[f].localtime?-this[f].nativeDate.getTimezoneOffset():0};o.prototype.valid=function(){return this[f].valid()};o.prototype.toObject=function(){return{year:this.year(),month:this.month(),day:this.day(),hour:this.hour(),minute:this.minute(),second:this.second(),millisecond:this.millisecond()}};o.prototype.toArray=function(){return[this.year(),this.month(),this.day(),this.hour(),this.minute(),this.second(),this.millisecond()]};o.prototype.toDate=function(...t){return new a(this.clone(...t))};for(const[t,e,n]of[["year","FullYear",0],["month","Month",1],["day","Date",0],["hour","Hours",0],["minute","Minutes",0],["second","Seconds",0],["millisecond","Milliseconds",0]])o.prototype[t]=function(u){return Y(u)?this.clone({[t]:u}):this[f].getNative(e)+n};o.prototype.dayOfWeek=function(){return 1+(this[f].getNative("Day")-1+b)%b};o.prototype.dayOfYear=function(){const t=this.toDate();return 1+t-t.startOfYear()};o.prototype.weekOfYear=function(){const t=this.toDate(),e=t.day(t.day()-t.dayOfWeek()+w),n=e.startOfYear(),u=n.dayOfWeek()===w?n:n.day(1+(w-n.dayOfWeek()+b)%b);return 1+Math.ceil((e-u)/b)};o.prototype.yearOfWeek=function(){const t=this.toDate();return t.day(t.day()-t.dayOfWeek()+w).year()};o.prototype.isLeapYear=function(){const t=this.year();return t%4===0&&(t%100!==0||t%400===0)};o.prototype.hasDstInYear=function(){if(!this[f].localtime)return!1;const t=this.offset();return[3,6,9,12].map(e=>this.month(e).offset()).some(e=>e!==t)};o.prototype.isInDst=function(){if(!this[f].localtime)return!1;const t=Array.from({length:12},(u,s)=>this.month(s+1).offset()),e=Math.min(...t),n=Math.max(...t);return e!==n&&this.offset()===n};o.prototype.isDstTransitionDay=function(){return this[f].localtime?this.minutesInDay()!==k:!1};o.prototype.minutesInDay=function(){if(!this[f].localtime)return k;const t=this.context({disambiguation:"later"}).startOfDay(),e=t.plus({day:1}).startOfDay();return t.day()===e.day()?k:(e-t)/ht};o.prototype.daysInMonth=function(){const t=[31,28,31,30,31,30,31,31,30,31,30,31],e=this.month();return t[e-1]+(this.isLeapYear()&&e===2?1:0)};o.prototype.daysInYear=function(){return this.isLeapYear()?366:365};o.prototype.weeksInYear=function(){const t=this.toDate({month:12,day:31}),e=t.minus({year:1});return t.dayOfWeek()===w||e.dayOfWeek()===et?53:52};for(const[t,e]of[["Year",{month:1,day:1,hour:0,minute:0,second:0,millisecond:0}],["Month",{day:1,hour:0,minute:0,second:0,millisecond:0}],["Hour",{minute:0,second:0,millisecond:0}],["Minute",{second:0,millisecond:0}],["Second",{millisecond:0}]])o.prototype[`startOf${t}`]=function(){return this.clone(e)};o.prototype.startOfDay=function(){const t=this.clone({disambiguation:"later"},{hour:0,minute:0,second:0,millisecond:0}).valueOf();return this.clone(t)};o.prototype.isSame=function(t){return+this==+t};o.prototype.isBefore=function(t){return this<t};o.prototype.isAfter=function(t){return this>t};o.prototype.isSameOrBefore=function(t){return this<=t};o.prototype.isSameOrAfter=function(t){return this>=t};o.prototype.isBetween=function(t,e){return t<=this&&this<=e||e<=this&&this<=t};o.prototype.plus=function(...t){return nt.call(this,1,...t)};o.prototype.minus=function(...t){return nt.call(this,-1,...t)};function nt(t,...e){var l,d;const n=e[0],u=e[1];if(Number.isFinite(n)&&!Number.isFinite(u))return this.clone(this.valueOf()+n);let s=null;if(T(n)){if(!S(n))throw RangeError("Missing time field (year, minute, day, hour, minute, second or millisecond)");s=n}else if(Number.isFinite(n)||Array.isArray(n)){const h=e.flat(),c=h.filter(D=>Number.isSafeInteger(D));if(c.length!==h.length)throw RangeError("Should be safe integers");if(c.length>7)throw RangeError("Too many numbers");s={year:c[0],month:c[1],day:c[2],hour:c[3],minute:c[4],second:c[5],millisecond:c[6]}}else throw TypeError();const i=this.nativeDate(),r=this[f].localtime?"":"UTC";if(p(s,"year")||p(s,"month")){const h=this.year()+t*((l=s.year)!=null?l:0),c=this.month()+t*((d=s.month)!=null?d:0),D=new Date(i.getTime());D[`set${r}FullYear`](h,c,0);const O=D[`get${r}Date`]();O<this.day()?i[`set${r}FullYear`](h,D[`get${r}Month`](),O):i[`set${r}FullYear`](h,c-1)}p(s,"day")&&i[`set${r}Date`](i[`get${r}Date`]()+t*s.day);for(const[h,c]of[["hour","Hours"],["minute","Minutes"],["second","Seconds"],["millisecond","Milliseconds"]])!p(s,h)||s[h]==null||i[`setUTC${c}`](i[`getUTC${c}`]()+t*s[h]);return this.clone(i)}const y=Symbol();function a(...t){if(!new.target)return new a(...t);const e={datetime:null};this[y]=e;let n=null;t[0]instanceof a?n=t.shift().toDatetime():t[0]instanceof o&&(n=t.shift());const u=t[0],s=t[1];return Number.isFinite(u)&&!Number.isFinite(s)&&(t[0]=Math.floor(u)*J),n?n=n.clone(...t):n=F(...t),e.datetime=n.startOfDay(),this}a.prototype.toString=function(){return this[y].datetime.toString().substring(0,10)};a.prototype.valueOf=function(){return this[y].datetime/J};a.prototype.valid=function(){return this[y].datetime.valid()};a.prototype.clone=function(...t){return new a(this,...t)};a.prototype.toDatetime=function(){return F(this[y].datetime.toArray())};a.prototype.toObject=function(){return{year:this.year(),month:this.month(),day:this.day()}};a.prototype.toArray=function(){return[this.year(),this.month(),this.day()]};a.prototype.startOfYear=function(){return new a(this[y].datetime.startOfYear())};a.prototype.startOfMonth=function(){return new a(this[y].datetime.startOfMonth())};for(const t of["year","month","day"])a.prototype[t]=function(e){return Y(e)?new a(this[y].datetime[t](e)):this[y].datetime[t]()};for(const t of["dayOfWeek","dayOfYear","weekOfYear","yearOfWeek","isLeapYear","daysInMonth","daysInYear","weeksInYear"])a.prototype[t]=function(){return this[y].datetime[t]()};for(const t of["minutesInDay","hasDstInYear","isDstTransitionDay"])a.prototype[t]=function(){return F({disambiguation:"later"},this[y].datetime.toArray().slice(0,3))[t]()};a.prototype.endOfYear=function(){return this.clone({month:12,day:31})};a.prototype.endOfMonth=function(){return this.clone({day:this.daysInMonth()})};a.prototype.isSame=function(t){return+this==+t};a.prototype.isBefore=function(t){return this<t};a.prototype.isAfter=function(t){return this>t};a.prototype.isSameOrBefore=function(t){return this<=t};a.prototype.isSameOrAfter=function(t){return this>=t};a.prototype.isBetween=function(t,e){return t<=this&&this<=e||e<=this&&this<=t};a.prototype.plus=function(...t){return ot.call(this,1,...t)};a.prototype.minus=function(...t){return ot.call(this,-1,...t)};function ot(t,...e){var r,l,d;const n=e[0],u=e[1],s=this[y].datetime;if(Number.isFinite(n)&&!Number.isFinite(u))return s.plus({day:t*n}).toDate();let i=null;if(T(n)&&S(n))i={year:t*((r=n.year)!=null?r:0),month:t*((l=n.month)!=null?l:0),day:t*((d=n.day)!=null?d:0)};else if(Number.isFinite(n)){if(e.length>3)throw RangeError("Too many arguments");i={year:t*n,month:t*u,day:t*arg2}}else if(Array.isArray(n)){if(n.length>3)throw RangeError("Too many elements");i={year:t*n[0],month:t*n[1],day:t*n[2]}}else throw TypeError();return s.plus(i).toDate()}exports.qrono=F;
//# sourceMappingURL=qrono.cjs.map
